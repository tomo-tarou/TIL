## Linuxとは
- Linuxは、本来Linux系OSの核であるLinuxカーネルを指す言葉である。カーネルとはOSの中核を担うプログラムであり、ハードウェアの資源管理やソフトウェアとハードウェアを繋ぐ役割を担う。
- カーネルがソフトウェアとハードウェアの橋渡しとなることでカーネルがソフトウェアの利用に合わせてハードウェアに命令を出すことができ、これによりソフトウェアは直接ハードウェアに対して命令をしなくてもすむようになっている。
- カーネルはOS(コンピュータを制御するソフトウェア)の核である一方でカーネル単体ではOSを動作させることは出来ない。OSを動かすためにはカーネル以外にもさまざまなソフトウェアが必要。そして、Linuxカーネルとその他のソフトウェアを組み合わせたものがLinuxディストリビューションであり広い意味でのLinuxになります。
- Linuxディストリビューションは大きく分けてDebian系、Red Hat系、Slackware系の三つが存在する。そして、これら三つの系統からさらに派生版が生まれており、三つの系統以外にも独立した系統のディストリビューションも存在している。

[Linuxのディストリビューションについて（ubuntu, centos）](https://envader.plus/article/7)

### **ディレクトリにまつわる用語**

| 用語 | 説明 |
| --- | --- |
| ディレクトリ | Linuxにおけるフォルダのこと |
| カレントディレクトリ | 今自分がいるディレクトリ |
| ルートディレクトリ | 一番上の階層のディレクトリ |
| ホームディレクトリ | ユーザーがログインした時に最初に開くディレクトリ |

パス(path)とは**ファイルのある場所までの道のり** を表すものです。“path”は「道・道のり・経路」といった意味がある英単語

| 記号 | 説明 |
| --- | --- |
| . | カレントディレクトリ(現在いるディレクトリのことです) |
| .. | 一つ上の階層(ディレクトリ) |
| / | ルートディレクトリ |
| ~ | ホームディレクトリ |
| - | ひとつ前にいたディレクトリ |

絶対パスは、**`/`(ルートディレクトリ)を起点にした、ファイルの場所を示すパス** 。

（絶対パスを「フルパス(full path)」ということもある。）

## cdコマンド
cd （change directoryの略）はディレクトリ間を移動する際に使用するコマンド。現在作業をしているディレクトリ（カレントディレクトリ）から、別のディレクトリに移動するときに使用。
**-（ハイフン）** を指定すると一つ前にいたディレクトリに移動することができる。

## lsコマンド
ls（listの略だが、list segmentsの略説もある）はディレクトリの中にあるファイルやディレクトリ等を確認するために使用するコマンド

### 主なオプション
| -a | 隠しファイルを含む全てのファイル(ディレクトリ)を表示する |
| --- | --- |
| -A | 隠しファイルを含む全てのファイル(ディレクトリ)のファイル名のみを表示する |
| -l | ファイルの種類や所有者・所有グループなどのファイル(ディレクトリ)の詳細を表示する |
| -i | inode番号も表示する |

### inode番号とは

### **`i` オプション**

- **`i`** オプションは、**`ls`**コマンド実行時に各ファイルやディレクトリのinode番号も一緒に表示するオプションです。
- **inode番号**:
    - inode番号は、LinuxやUnix系オペレーティングシステムにおいて、ファイルシステムが各ファイルやディレクトリを識別するために使用するユニークな番号
    - inodeにはファイルのメタデータ（サイズ、作成日時、所有者、パーミッションなど）が保存されているが、ファイル名やディレクトリ名は含まれない。
- 使用シーン（シチュエーション）
    1. **ファイルシステムのトラブルシューティング**:
        - inode番号を使って、ファイルシステムの問題を診断する際に役立つ。特にファイルシステムの破損やエラーが疑われる時に、inode番号を調べることで問題の原因を特定しやすくなる
    2. **ハードリンクの確認**:
        - 同じinode番号を持つ複数のファイル名（ハードリンク）が存在する場合、**`ls -i`**を使用してそれらが同じファイルを指しているかどうかを確認できる
    3. **ファイルの重複検出**:
        - 大量のファイルがある場合、**`ls -i`** コマンドを使用してinode番号を確認し、同じinode番号を持つファイルが重複していないかチェックできる
    4. **バックアップや復元プロセス**:
        - ファイルシステムのバックアップや復元を行う際、inode番号を参照して正しいファイルがバックアップや復元されているかを確認するのに役立ちます。
    
    これらの用途は、主にシステム管理者やアドバンスドユーザーがファイルシステムの深いレベルで作業を行う際に特に重要になりますにゃん。通常の日々の使用ではあまり使われることはないかもしれませんが、特定の状況や問題解決には非常に役立つコマンド
    

### ハードリンクとは
- ハードリンクは、ファイルシステム上の同じデータを指す異なるファイル名である。これらはすべて同じinode番号を共有する
- これにより、複数のファイル名が実際には同じ物理的なデータを指していることになる
- ハードリンクを作成すると、異なる名前で同じファイルにアクセスできますが、ディスク上のスペースは追加で消費されない
- いずれかのハードリンクを変更または削除しても、他のハードリンクや元のファイルには影響しない。ファイルシステムは最後のリンクが削除されるまでデータを保持します。

**例：**ファイル **`file1.txt`** があり、それに **`file2.txt`** というハードリンクを作成した場合、**`file1.txt`** と **`file2.txt`** は同じinode番号を持ち、どちらも同じファイルの内容を指す。この特性は、ファイルの整理、バックアップ、データ管理などで役立つが、同時に複数のファイル名が同じ内容を指していることを認識しておく必要がある

### **ハードリンクの特性**
- **同じinode番号**: ハードリンクされたファイルは、同じinode番号を持つ。これは、同じ物理的なデータを指していることを意味する。
- **異なるファイル名**: 同じファイル内容が異なる名前で存在することができるが、これらはファイルシステム上では同一のファイルとして扱われる。

### **ハードリンクでない場合**
- 異なるinode番号を持つファイルは、ハードリンクではない。これらは別々のファイルとして存在し、それぞれ独立した内容を持つ。
- 例えば、ファイルをコピーして新しい名前を付けた場合、コピーされたファイルは新しいinode番号を持ち、元のファイルとは異なるものになる。

ハードリンクは同じデータを指す複数のエントリを作成するためのメカニズムだが、単にファイル名が異なるだけではハードリンクとは言えない。ハードリンクかどうかはinode番号によって判断される。

## catコマンド
catはファイルの中身を見るコマンドで、「concatenate」（つなげる・連結する）の略

### **主なオプション**

| オプション | 説明 |
| --- | --- |
| -s | 連続したスペースやタブを1行にして表示する |
| -n | 行番号をつけて表示する |
| -A | 非表示文字も含めてすべて表示する |
| -E | 最終行に$を表示する |

```
# sample1.txtとsample2.txtの中身を連結して表示します。
cat sample1.txt sample2.txt

# sample1.txtとsample2.txtの中身を連結させたものをsample3.txtという新規ファイルに出力します。
cat sample1.txt sample2.txt > sample3.txt
```

ファイルの中身を逆順で表示する**`tac`**というコマンドもある

```
# sample.txtというテキストファイルを作成します。
vi sample.txt
==========
Google
Apple
Facebook
Amazon
==========

# tacコマンドでsample.txtを出力します。
tac sample.txt
Amazon
Facebook
Apple
Google
```

## nlコマンド
nl(number line)は行頭に行番号を振って出力するコマンド。

```bash
nl sample.txt
	1 Google
	2 Apple
	3 Facebook
	4 Amazon
```

### **主なオプション**

| オプション | 説明 |
| --- | --- |
| -b | 指定されたタイプで行番号を振る |
| -h | -bと同様の指定したタイプでヘッダ(header)に行番号を振る |
| -f | -bと同様の指定したタイプでフッタ(footer)に行番号を振る |

### **タイプ**

オプションにはタイプを指定できます。

| タイプ | 説明 |
| --- | --- |
| a | すべての行 |
| t | 空行でないすべての行 |
| p | 正規表現にマッチしたテキストを含む行 |

## fmtコマンド
fmt(format)はファイルを整形して出力するコマンド

```bash
# オプションのない場合は全て横並びになります。
fmt sample.txt
Google Apple Facebook Amazon
```

### **主なオプション**

| オプション | 説明 |
| --- | --- |
| -c | インデントを保持したまま整形する |
| -s | 長い行を複数行に分割する |
| -t | タグ(a.や 1.など)付きの段落として整形する |
| -w | 表示幅を指定する |

## wcコマンド
wc(word count)は文字数をカウントしたり、ファイルサイズを出力したりするためのコマンド

```
wc test_file
15      15     105 test_file
```

オプションなしの場合は[行数]・[単語数]・[文字数]・[ファイル名]という順序で表示されます。

### **主なオプション**
| オプション | 説明 |
| --- | --- |
| -c | バイト数を表示する |
| -m | 文字数を表示する |
| -l | 改行数を表示する |
| -w | 単語数を表示する |
| -L | 最長の行を表示する |

## cutコマンド
cutはファイル内のテキストを部分的に切り取って出力するためのコマンド

```bash
# stationery.txtというファイルを作成します。
vi stationery.txt
=========
pencil
stapler
paper clip
eraser
=========

# 区切り文字にスペースを指定し、1つ目の項目のみを表示します。
# 3行目は”paper”だけが出力されます。
cut -d " " -f 1 stationery.txt
pencil
stapler
paper
eraser
```

### **主なオプション**

| オプション | 説明 |
| --- | --- |
| -b | 切り取るバイト数を指定する |
| -c | 指定列の文字のみを切り出す |
| -d | 区切り文字(delimiter)を指定する (デフォルトではカンマです) |
| -f | 区切られた項目のうち、表示する項目を指定する |

## prコマンド

pr(print)は印刷に適した形式にファイルを整形するコマンド

```bash
pr -2 sample.txt
Google				    Facebook
Apple				    Amazon
```

### **主なオプション**

| オプション | 説明 |
| --- | --- |
| -d | 行間に空行を差し込む |
| -数値 | 指定した数値の列数に整形する |

## mvコマンド

mvはディレクトリやファイルを別のディレクトリへ移動したり、ディレクトリ名やファイル名を変更する際に使用するコマンド

```bash
# 使い方
mv [オプション] [移動させたいディレクトリ(またはファイル)名] [移動先のディレクトリ名]
```

### **主なオプション**

| オプション | 説明 |
| --- | --- |
| -f | 移動先に同名のファイルがある場合、強制的に移動（上書き）されます。 |
| -i | 移動先に同名のファイルがある場合、確認メッセージが表示されます。 |
| -b | 移動により上書き（削除）されるファイルのバックアップを作成します。 |
| -n | 移動先に同名のディレクトリ（またはファイル）がある場合は、処理を実行しません。 |
| -v | 移動処理を行う際の詳細情報を表示します。 |

mvコマンドはディレクトリやファイルの中身は変更せず、名前だけを変更することもできる。 その際、新しく指定するディレクトリ名(またはファイル名)は、そのディレクトリに存在しない名前でなければならない。既存の名前を指定してしまうと、そのディレクトリやファイルが対象ディレクトリ・ファイルの内容で上書きされてしまうので注意が必要。

```bash

# ファイル名をファイル1からファイル2へ変更します。
mv [ファイル1] [ファイル2]
```

ファイルを任意のディレクトリに移動する場合には、移動先のディレクトリ名の後ろに/.をつけることで、より安全に作業を行える。この/.の指定により、移動先がディレクトリであることを明示的に示すことができ、存在しないディレクトリ名が指定された場合に、予期しないリネーム操作を防ぐことができる。 この/.には「ディレクトリ直下の」という意味があります。もし/.を付けずに上記のコマンドを指示し、且つhogehogeディレクトリが存在していなかった場合、hoge.txtファイルはhogehogeというファイルにリネームされるという挙動をとる。

```bash

#hoge.txtをhogehogeディレクトリに移動
mv hoge.txt hogehoge/.
```

## cpコマンド
cpは既存のファイルを複製する（コピー）際に使用するコマンド

### **主なオプション**

| オプション | 説明 |
| --- | --- |
| -i | コピーによって上書きされるファイルがある場合、確認メッセージを表示 |
| -v | コピーの実行内容を表示 |
| -n | コピー先に既に同名のファイルが存在する場合、処理を中断する。 |
| -f | コピー先に同名のファイルが存在していても、強制的にコピー（上書き）を実行。 |
| -b | コピー（上書き）時にバックアップファイルが作成される |
| -r | ディレクトリ内を再帰的にコピーする。 |
| -p | 所有者・属性・更新日時など元ファイルのものを保持する。 |

### **再帰的にコピーする**

- -rオプションを使用してディレクトリをコピーすると、その中にある全ての子ディレクトリやファイルを含めてコピーすることが出来ます。

```bash

cp -r [コピー元ディレクトリ] [コピー先ディレクトリ]
```

- 「再帰的」は、ある条件が満たされた場合に、その処理が自分自身を呼び出し繰り返すことを指す。cpコマンドの場合、-rオプションを使用すると、指定したディレクトリ内のすべてのサブディレクトリやファイルをコピーすることが可能になる。このとき、コピー処理は各ディレクトリやファイルに対して一つずつ実行され、それぞれの処理が終わるごとに、次に処理対象となる要素がコピー対象であるかどうかを判断する。コピー対象であると判断された場合、処理は再度自分自身を呼び出し、これを繰り返すことで全ての要素をコピーする。このような処理のことを「再帰的」と言う。

- cp: -r not specified; omitting directory 'myapp/'

- ディレクトリをコピーする際に -r をつけ忘れたことによるエラー
  - specify 指定する
  - ommit 省略

[Linuxコマンド [cd/ls/cat等]](https://envader.plus/course/1/scenario/1001)
